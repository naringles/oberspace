(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{150:function(e,t,a){e.exports=a(212)},207:function(e,t){},211:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(12),o=a.n(r),c=a(8),s=a(39),i=a(19),u=a(21),m=a.n(u),d=a(29),f=a(7),g=a.n(f),p=Object(n.createContext)(),b=function(e){var t=JSON.parse(sessionStorage.getItem("login")),a=Object(n.useState)(t||{username:"",status:!1}),r=Object(c.a)(a,2),o=r[0],s=r[1];return Object(n.useEffect)((function(){sessionStorage.setItem("login",JSON.stringify(o))}),[o]),l.a.createElement(p.Provider,{value:[o,s]},e.children)},E=Object(n.createContext)(),v=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useMemo)((function(){return{searchVal:r,setSearchVal:o}}));return l.a.createElement(E.Provider,{value:s},e.children)},h=Object(n.createContext)(),O=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useMemo)((function(){return{filterVal:r,setFilterVal:o}}));return l.a.createElement(h.Provider,{value:s},e.children)},y=(JSON.parse(sessionStorage.getItem("dark")),Object(n.createContext)()),j=function(e){var t=JSON.parse(sessionStorage.getItem("dark")),a=Object(n.useState)(t||!1),r=Object(c.a)(a,2),o=r[0],s=r[1];Object(n.useEffect)((function(){sessionStorage.setItem("dark",o)}),[o]);var i=Object(n.useMemo)((function(){return{darkMode:o,setDarkMode:s}}));return l.a.createElement(y.Provider,{value:i},e.children)},N=a(131),w=a.n(N),S=Object(n.createContext)(),C=function(e){var t=JSON.parse(localStorage.getItem("files")),a=Object(n.useState)(t||[]),r=Object(c.a)(a,2),o=r[0],s=r[1];Object(n.useEffect)((function(){localStorage.setItem("files",JSON.stringify(o))}),[o]);var i=Object(n.useMemo)((function(){return{files:o,setFiles:s}}));return l.a.createElement(S.Provider,{value:i},e.children)},x=a(259),D=a(258),k=a(53),F=a.n(k),I=a(254),T=a(256),A=function(e){var t=Object(n.useContext)(p),a=Object(c.a)(t,2),r=a[0],o=(a[1],Object(n.useContext)(E)),s=(o.searchVal,o.setSearchVal),i=Object(n.useContext)(S),u=i.files,m=(i.setFiles,g()("d-inline-block","align-top")),d=g()("custom-control","custom-switch","darkMode"),f="/user/home/"+r.username,b=Object(n.useState)(""),v=Object(c.a)(b,2),h=v[0],O=v[1],j=Object(n.useState)(""),N=Object(c.a)(j,2),C=N[0],k=N[1],A=Object(n.useContext)(y),M=A.darkMode,P=A.setDarkMode;return Object(n.useEffect)((function(){(console.log("dark mode: ",M),M)?(document.querySelectorAll("body,.card,.list-group-item,.tooltiptext").forEach((function(e){e.style.backgroundColor="#000",e.style.color="#fff"})),document.querySelector(".footerComp").style.color="#fff"):document.querySelectorAll("body,.card,.list-group-item,.tooltiptext").forEach((function(e){e.style.backgroundColor="#fff",e.style.color="#000",document.querySelector(".footerComp").style.color="#000"}))}),[M]),l.a.createElement(x.a,{variant:"dark",expand:"lg",sticky:"top"},l.a.createElement(x.a.Brand,{href:f},l.a.createElement("img",{style:{float:"left"},src:F.a,width:"80",height:"60",className:m,alt:"CheckMeIn logo"}),l.a.createElement("h3",{style:{paddingTop:"10%"}},"OneStorage")),l.a.createElement(x.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),l.a.createElement(x.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(D.a,{className:"ml-auto"},l.a.createElement("div",{className:d},l.a.createElement("input",{type:"checkbox",onChange:function(){P(!M)},className:"custom-control-input",id:"customSwitch1"}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitch1"},M?l.a.createElement("span",null,"Night Mode"):l.a.createElement("span",null,"Day Mode")))),l.a.createElement(D.a,{className:"ml-auto"},l.a.createElement(T.a,{value:h,onChange:function(e,t){O(t),s(t)},inputValue:C,onInputChange:function(e,t){k(t)},id:"free-solo-demo",clearOnEscape:!0,clearOnBlur:!0,freeSolo:!0,label:"Search",options:u.map((function(e){return e.fileName})),style:{width:"100%",height:"10%"},renderInput:function(e){return l.a.createElement(I.a,Object.assign({},e,{style:{background:"white",width:"40vw"},variant:"outlined",placeholder:"Search Files"}))}})),l.a.createElement(D.a,{className:"ml-auto"},l.a.createElement(D.a.Link,{href:"/user/auth/logout",onClick:e.clearSession},"Logout ",l.a.createElement(w.a,{style:{fill:"white"}})))))};var M=function(){var e=Object(n.useContext)(p),t=Object(c.a)(e,2),a=t[0],r=t[1],o=g()("d-inline-block","align-top"),s=g()("custom-control","custom-switch","darkMode"),i=Object(n.useContext)(y),u=i.darkMode,m=i.setDarkMode;return Object(n.useEffect)((function(){u?document.querySelectorAll("body,.card,.list-group-item").forEach((function(e){e.style.backgroundColor="#000",e.style.color="#fff"})):document.querySelectorAll("body,.card,.list-group-item").forEach((function(e){e.style.backgroundColor="#fff",e.style.color="#000"}))}),[u]),l.a.createElement("header",null,a.status?l.a.createElement(A,{clearSession:function(){r({username:"",status:!1}),sessionStorage.clear()}}):l.a.createElement(x.a,{variant:"dark",sticky:"top"},l.a.createElement(x.a.Brand,{href:"/"},l.a.createElement("img",{style:{float:"left"},src:F.a,width:"80",height:"60",className:o,alt:"oneStorage logo"}),l.a.createElement("h3",{style:{paddingTop:"10%"}},"OneStorage")),l.a.createElement(D.a,{className:"ml-auto"},l.a.createElement("div",{className:s},l.a.createElement("input",{type:"checkbox",onChange:function(){m(!u)},className:"custom-control-input",id:"customSwitch1"}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitch1"},u?l.a.createElement("span",null,"Night Mode"):l.a.createElement("span",null,"Day Mode"))))))};var P=function(){var e=(new Date).getFullYear(),t=Object(n.useContext)(p),a=Object(c.a)(t,2),r=a[0],o=(a[1],"/user/home/"+r.username);return l.a.createElement(x.a,{style:{background:"none",height:"5vh",margin:"5% 0 0 0",padding:"1.5% 0 0.5% 0"},expand:"lg",sticky:"bottom"},l.a.createElement(D.a,{className:"ml-auto mr-auto"},l.a.createElement(x.a.Brand,{href:o},l.a.createElement("p",{style:{fontSize:"medium"},className:"footerComp"},"Copyright \u24d2 ",e))))},B=a(24),J=a.n(B),q=Object(n.createContext)(),V=function(e){var t=JSON.parse(sessionStorage.getItem("drives")),a=Object(n.useState)(t||[]),r=Object(c.a)(a,2),o=r[0],s=r[1];Object(n.useEffect)((function(){sessionStorage.setItem("drives",JSON.stringify(o))}),[o]);var i=Object(n.useMemo)((function(){return{drives:o,setDrives:s}}));return l.a.createElement(q.Provider,{value:i},e.children)},L=Object(n.createContext)(),z=function(e){var t=Object(n.useState)({status:!1,message:""}),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useMemo)((function(){return{driveDeleted:r,setDriveDeleted:o}}));return l.a.createElement(L.Provider,{value:s},e.children)},H=a(43),U=a.n(H),R=a(101),G=a.n(R),Y=a(100),W=a.n(Y),$=a(132),_=a.n($),K=a(260),Z=a(88),Q=a.n(Z);var X=function(e){e.match;var t=Object(n.useContext)(E),a=t.searchVal,r=(t.setSearchVal,Object(n.useContext)(h)),o=r.filterVal,s=r.setFilterVal,u=Object(i.e)();"#_=_"===window.location.hash&&(u.replaceState?u.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash="");var m=Object(n.useContext)(q),d=(m.drives,m.setDrives,Object(n.useContext)(S)),f=d.files,b=d.setFiles,v=Object(n.useState)(f),O=Object(c.a)(v,2),y=O[0],j=O[1],N=Object(n.useContext)(p),w=Object(c.a)(N,2),C=(w[0],w[1],Object(n.useState)({start:0,end:10})),x=Object(c.a)(C,2),D=x[0],k=x[1],F=(g()(""),Object(n.useState)(y.slice(D.start,D.end))),I=Object(c.a)(F,2),T=I[0],A=I[1];Object(n.useEffect)((function(){console.log("visible array refresh due to marker"),A(y.slice(D.start,D.end))}),[D]),Object(n.useEffect)((function(){console.log("marker refresh on new files arrival"),k({start:0,end:10})}),[y]),Object(n.useEffect)((function(){null!==a?(console.log("search val : ",a),A(y.filter((function(e){return e.fileName===a})))):(console.log("search val is null"),A(y.slice(D.start,D.end)))}),[a]),Object(n.useEffect)((function(){j(""!==o?f.filter((function(e){return e.fileFolderType===o})):f)}),[o,f]);var M=Object(n.useState)(-1),P=Object(c.a)(M,2),B=P[0],V=P[1];return l.a.createElement(K.a,null,l.a.createElement("div",{className:"cardHeader"},l.a.createElement(K.a.Header,null,"Files",""!==o?l.a.createElement("div",{style:{position:"absolute",left:"15%",top:"1.5%"}},l.a.createElement("p",null,"File Type :",o," ",l.a.createElement("button",{className:"fileFilter",title:"clear",onClick:function(){s("")}},l.a.createElement(_.a,null)))):null,l.a.createElement("div",{style:{position:"absolute",right:"1%",top:"1%"}},l.a.createElement("button",{className:"prevIconB",onClick:function(){D.start>=10&&k({start:D.start-10,end:D.end-10})}},l.a.createElement(W.a,null))," ",l.a.createElement("button",{className:"nextIconB",onClick:function(){D.end<=y.length-10&&k({start:D.start+10,end:D.end+10})}},l.a.createElement(G.a,null))))),l.a.createElement(K.a.Body,{className:"fileList"},l.a.createElement("div",{className:"list-group"},l.a.createElement("ul",null,T.map((function(e,t){return l.a.createElement("div",{key:e.fileId,className:"fileRow"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-10"},l.a.createElement("a",{href:e.webViewLink},e.fileName,void 0!==e.size?l.a.createElement("span",{className:"tooltiptext"},(e.size/1048576).toFixed(3)," MB "):null)),l.a.createElement("div",{className:"col-md-2"},B===t?l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-danger",onClick:function(t){return a=e.fileId,n=e.fileName,l=e.fileFolderType,void J.a.post("/action/file/delete",{id:a,folderType:l,name:n}).then((function(e){console.log("Resp data: ",e.data),e.data.success&&b(f.filter((function(e){return e.fileId!==a})))})).then((function(){V(-1)})).catch((function(e){console.error(e)}));var a,n,l}}," Confirm")," ",l.a.createElement("br",null),"  ",l.a.createElement("br",null)," ",l.a.createElement("button",{className:"btn btn-success",onClick:function(){return V(-1)}}," Cancel")):l.a.createElement("button",{className:"fileDelete",onClick:function(){return V(t)}}," ",l.a.createElement(Q.a,null)))))}))),l.a.createElement("div",{className:"row",style:{position:"absolute",right:"1%",bottom:"-5%"}}))))},ee=a(257),te=a(253);var ae=function(){var e=Object(n.useContext)(h),t=(e.filterVal,e.setFilterVal),a=function(e){t(e.target.innerText)};return l.a.createElement(ee.a,{id:"dropdown-custom-2",as:te.a,drop:"right"},l.a.createElement(ee.a.Toggle,{className:"dropDToggle"},"Filter by file type"),l.a.createElement(ee.a.Menu,{className:"menuColors"},["PDF","WordDocument","Spreadsheet","PowerPoint","OneNote","Application","Compressed","Audio","Image","Video","Plain","Others"].map((function(e,t){return l.a.createElement(ee.a.Item,{key:t,className:"dropDText",eventKey:"".concat(t),onClick:a}," ",e)}))))},ne=function(e){var t=e.percentage;return l.a.createElement("div",{className:"upload progress",title:"".concat(t,"%")},l.a.createElement("div",{className:"progress-bar progress-bar-striped bg-success",role:"progressbar",style:{width:"".concat(t,"%")}},l.a.createElement("span",{className:"progressPct"},t,"%")))},le=a(261),re=a(61),oe=a(91),ce=a(134);a(181);var se=function(e){e.match,Object(i.e)();var t=Object(n.useContext)(p),a=Object(c.a)(t,2),r=(a[0],a[1],Object(n.useContext)(q)),o=r.drives,s=r.setDrives,u=Object(n.useContext)(L),m=(u.driveDeleted,u.setDriveDeleted),d=Object(n.useState)({}),f=Object(c.a)(d,2),g=f[0],b=f[1],E=Object(n.useState)(),v=Object(c.a)(E,2),h=v[0],O=v[1],y=Object(n.useState)({googleDrive:"",oneDrive:"",dropbox:""}),j=Object(c.a)(y,2),N=j[0],w=j[1],S=Object(n.useState)(""),C=Object(c.a)(S,2),x=C[0],D=C[1];Object(n.useEffect)((function(){o.length>0&&(b(o.map((function(e){return{usage:parseFloat(e.storageUsage),limit:parseFloat(e.storageLimit)}})).reduce((function(e,t){return{usage:e.usage+t.usage,limit:e.limit+t.limit}}))),w({googleDrive:o.filter((function(e){return"googleDrive"===e.storageType})).length,oneDrive:o.filter((function(e){return"oneDrive"===e.storageType})).length,dropbox:o.filter((function(e){return"dropbox"===e.storageType})).length}))}),[o]),Object(n.useEffect)((function(){O(g.usage/g.limit*100)}),[g]);var k=function(e){0===x.length?D(e.target.attributes.getNamedItem("name").value):D("")},F=function(e,t,a){console.log("id to delete: ",e),J.a.post("/action/drive/delete",{driveIdDelete:e}).then((function(t){t.data.success&&(s(o.filter((function(t){return t.id!==e}))),window.location.reload()),m({status:t.data.success,message:t.data.message}),setTimeout((function(){return m({status:!1,message:""})}),1e4)})).catch((function(e){console.error(e)}))};return l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col",style:{padding:"0% 0% 1% 2%",margin:"0% 2% 1% 5%"}},l.a.createElement(ae,null))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col",style:{padding:"0% 0% 1% 2%",margin:"0% 2% 1% 5%"}},l.a.createElement(K.a,null,l.a.createElement("div",{className:"cardHeader"},l.a.createElement(K.a.Header,null,"Storage Info")),l.a.createElement(K.a.Body,{style:{padding:"2% 1% 0% 2%"}},l.a.createElement(K.a.Title,null,h>=90?l.a.createElement(le.a,{now:h,variant:"danger",label:"".concat((g.usage/g.limit*100).toFixed(2),"%")}):h>=75?l.a.createElement(le.a,{now:h,variant:"warning",label:"".concat((g.usage/g.limit*100).toFixed(2),"%")}):l.a.createElement(le.a,{style:{width:"15vw"},now:h,variant:"success",label:"".concat((g.usage/g.limit*100).toFixed(2),"%")})),l.a.createElement("p",null,"Total Limit : ",(g.limit/1073741824).toFixed(2)," GB"),l.a.createElement("p",null,"Total Usage : ",(g.usage/1073741824).toFixed(2)," GB"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col",style:{padding:"0% 0% 1% 2%",margin:"0% 2% 1% 5%"}},l.a.createElement(K.a,null,l.a.createElement("div",{className:"cardHeader"},l.a.createElement(K.a.Header,null,"Drives Info")),l.a.createElement(K.a.Body,{style:{padding:"0% 1% 0% 2%"}},l.a.createElement("div",{className:"list-group"},l.a.createElement("ul",null,l.a.createElement("li",{onClick:k,className:"list-group-item",name:"googleDrive"}," ",l.a.createElement(re.b,null)," : ",N.googleDrive," drives added "),l.a.createElement("li",{onClick:k,className:"list-group-item",name:"oneDrive"}," ",l.a.createElement(oe.a,null)," : ",N.oneDrive," drive",parseInt(N.oneDrive)>1&&"s"," added "),l.a.createElement("li",{onClick:k,className:"list-group-item",name:"dropbox"}," ",l.a.createElement(re.a,null)," : ",N.dropbox," drive",parseInt(N.dropbox)>1&&"s"," added "),x.length>0?l.a.createElement("div",{className:"driveList",style:{marginTop:"5%"}},l.a.createElement("h5",null,x,"(s)"),o.filter((function(e){return e.storageType===x})).map((function(e){return l.a.createElement("ol",{key:e.id,style:{fontSize:"smaller"}},l.a.createElement("li",{style:{padding:"0",margin:"0"},className:"list-group-item"},"  ",e.email,l.a.createElement("br",null),l.a.createElement(ne,{percentage:Math.round(parseInt(e.storageUsage)/parseFloat(e.storageLimit)*1e4)/100}),l.a.createElement("button",{className:"fileDelete",onClick:function(t){return a=e.id,void Object(ce.confirmAlert)({title:"Confirm to Delete",message:"Are you sure to delete this drive.",buttons:[{label:"Yes",onClick:function(){return F(a)}},{label:"No",onClick:function(){return null}}]});var a}}," ",l.a.createElement(Q.a,null))))}))):null)))))))};var ie=function(e){e.match;var t=Object(n.useContext)(p),a=Object(c.a)(t,2);return a[0],a[1],l.a.createElement(K.a,null,l.a.createElement("div",{className:"cardHeader"},l.a.createElement(K.a.Header,null,"Add Drives")),l.a.createElement("div",{className:"addDrive"},l.a.createElement(K.a.Body,null,l.a.createElement("ul",null,l.a.createElement("li",{style:{borderRight:"1px solid rgb(68, 67, 67)"}}," ",l.a.createElement("a",{title:"Google Drive",href:"/user/add/google"},l.a.createElement(re.b,null))),l.a.createElement("li",{style:{borderRight:"1px solid rgb(68, 67, 67)"}}," ",l.a.createElement("a",{title:"One Drive",href:"/user/add/ms"},l.a.createElement(oe.a,null))),l.a.createElement("li",null," ",l.a.createElement("a",{title:"Dropbox",href:"/user/add/db"},l.a.createElement(re.a,null)))))))},ue=a(18),me=a(255);var de=function(e){console.log("props.show is :",e.show);var t=Object(n.useContext)(p),a=Object(c.a)(t,2),r=(a[0],a[1],Object(n.useContext)(S)),o=r.files,s=(r.setFiles,Object(n.useState)([])),i=Object(c.a)(s,2),u=i[0],f=i[1],g=Object(n.useState)(["Choose Files(s)"]),b=Object(c.a)(g,2),E=b[0],v=b[1],h=Object(n.useState)(0),O=Object(c.a)(h,2),y=O[0],j=O[1],N=Object(n.useState)(e.show),w=Object(c.a)(N,2),C=w[0],x=w[1],D=Object(n.useState)(["Note:"]),k=Object(c.a)(D,2),F=k[0],I=k[1];Object(n.useEffect)((function(){E.map((function(e){o.map((function(t){t.fileName===e&&I((function(t){return Object(ue.a)(new Set([].concat(Object(ue.a)(t),["A file with ".concat(e," already exists, do you want upload this again?")])))}))}))}))}),[E]);var T=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,l,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),console.log("files: ",u),console.log("file names: ",E),a=new FormData,n=0;n<u.length;n++)l=u.item(n),a.append("file",l);return console.log("formData: ",a),e.prev=6,e.next=9,J.a.post("/action/upload/multiple",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){j(parseInt(Math.round(100*e.loaded/e.total))),setTimeout((function(){return j(0)}),1e4)}});case 9:r=e.sent,console.log("File Uploaded : ",r.data),v(["Choose Files(s)"]),f([]),I(["Note: "]),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),console.log("There was a problem with the server"),console.log(e.t0.response.data.msg);case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x(e.show)}),[e.show]),l.a.createElement(me.a,{show:C,onHide:function(){x(!1),e.handleClose(),I(["Note: "]),v(["Choose Files(s)"]),f([])},backdrop:"static",keyboard:!1},l.a.createElement(me.a.Header,{closeButton:!0},l.a.createElement(me.a.Title,null,"Select files to upload")),l.a.createElement("form",{onSubmit:T},l.a.createElement(me.a.Body,null,l.a.createElement("div",{className:"custom-file mb-4"},l.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){I(["Note: "]),f(e.target.files),v(Object(ue.a)(e.target.files).map((function(e){return e.name})))},multiple:!0}),l.a.createElement("label",{style:{overflowY:"hidden"},className:"custom-file-label",htmlFor:"customFile"},E.map((function(e,t){return l.a.createElement("span",{key:t},e," ")}))))),l.a.createElement(me.a.Footer,null,F.length>1?l.a.createElement("div",{style:{backgroundColor:"#440c05",color:"#fff",padding:"2%"}},F.map((function(e,t){return l.a.createElement("p",{key:t},e)}))):null,l.a.createElement(ne,{percentage:y}),l.a.createElement("input",{type:"submit",value:"Upload",className:"btn btn-primary btn-block mt-4"}))))},fe=a(136),ge=a.n(fe);var pe=function(e){e.match,g()("custom-control","custom-switch");var t=["octet-stream","vnd.google-apps.spreadsheet","vnd.google-apps.document","vnd.google-apps.presentation","pdf"],a=["Plain","Spreadsheet","WordDocument","PowerPoint","PDF"],r=new Object;Object(n.useEffect)((function(){t.forEach((function(e,t){r[e]=a[t]}))}),[]),Object(n.useEffect)((function(){var e;console.log("environment :","production"),e=ge.a.connect(),console.log("socket is :",e),e.on("oneDriveFiles",(function(e){console.log("Incoming onedriveFiles:",e.files.filter((function(e){return new Date(e.createdAt)>=new Date(JSON.parse(sessionStorage.lastFetchDt))}))),C((function(t){return U.a.unionBy(e.files.filter((function(e){return new Date(e.createdAt)>=new Date(JSON.parse(sessionStorage.lastFetchDt))})),t,"fileId")}))})),e.on("dbxFiles",(function(e){console.log("Incoming dbxFiles:",e.files.filter((function(e){return new Date(e.createdAt)>=new Date(JSON.parse(sessionStorage.lastFetchDt))}))),C((function(t){return U.a.unionBy(e.files.filter((function(e){return new Date(e.createdAt)>=new Date(JSON.parse(sessionStorage.lastFetchDt))})),t,"fileId")}))})),e.on("googleFiles",(function(e){console.log("Incoming googleFiles:",e.files.filter((function(e){return new Date(e.createdAt)>=new Date(JSON.parse(sessionStorage.lastFetchDt))}))),C((function(t){return U.a.unionBy(e.files.filter((function(e){return new Date(e.createdAt)>=new Date(JSON.parse(sessionStorage.lastFetchDt))})),t,"fileId")}))}))}),[]);var o=Object(i.e)(),s=Object(n.useState)({status:!1,type:"",email:"",message:""}),u=Object(c.a)(s,2),f=u[0],b=u[1],E=Object(n.useContext)(L),v=E.driveDeleted,h=(E.setDriveDeleted,Object(n.useContext)(y)),O=h.darkMode;h.setDarkMode,Object(n.useEffect)((function(){var e=window.location.search;if(console.log("queryString:",e),void 0!==typeof e&&""!==e){var t=new URLSearchParams(e);"true"===t.get("success")?(console.log("status is: ",t.get("success")),console.log("attempt is: ",t.get("attempt")),console.log("message : ",t.get("message")),t.get("attempt").includes("add")&&(console.log("new Drive is: ",t.get("newDrive")),console.log("new Drive type is: ",t.get("newDriveType")),b({status:!0,type:t.get("newDriveType"),email:t.get("newDrive"),message:t.get("message")}))):(console.log("status is: ",t.get("success")),console.log("status is: ",t.get("attempt")),console.log("message : ",t.get("message")),t.get("attempt").includes("add")&&b({status:!1,type:"NA",email:"NA",message:t.get("message")})),setTimeout((function(){return b({status:!1,type:"",email:"",message:""})}),1e4),window.history.replaceState({},null,window.location.href.split("?")[0])}(console.log("dark mode: ",O),O)?document.querySelectorAll("body,.card,.list-group-item,.tooltiptext").forEach((function(e){e.style.backgroundColor="#000",e.style.color="#fff"})):document.querySelectorAll("body,.card,.list-group-item,.tooltiptext").forEach((function(e){e.style.backgroundColor="#fff",e.style.color="#000"}));(console.log("dark mode: ",O),O)?document.querySelectorAll("body,.card,.list-group-item,.tooltiptext").forEach((function(e){e.style.backgroundColor="#000",e.style.color="#fff"})):document.querySelectorAll("body,.card,.list-group-item,.tooltiptext").forEach((function(e){e.style.backgroundColor="#fff",e.style.color="#000"}))}),[]);var j=Object(n.useContext)(q),N=(j.drives,j.setDrives),w=Object(n.useContext)(S),C=(w.files,w.setFiles),x=Object(n.useContext)(p),D=Object(c.a)(x,2),k=D[0],F=(D[1],Object(n.useState)(!1)),I=Object(c.a)(F,2),T=I[0],A=I[1];return console.log(" user home page"),Object(n.useEffect)((function(){J.a.get("/user/data/read",{withCredentials:!0}).then(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.setItem("lastFetchDt",JSON.stringify(new Date)),t.data.success?(console.log("response: ",t.data),t.data.drives.length>0?(N(t.data.drives),C(t.data.drives.map((function(e){return e.files})).flat().sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})).map((function(e){if(e.fileFolderType.includes("undefined")){var t=e.mimeType.split("/"),a=t[t.length-1].toLowerCase();"undefined"!==typeof r[a]?e.fileFolderType=r[a]:e.fileFolderType="Others"}return e})))):N([])):o.push("/");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}),[]),l.a.createElement("div",null,l.a.createElement(M,null),k.status&&l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row",style:{paddingTop:"2%"}},l.a.createElement("div",{className:"col-sm-2",style:{padding:"0"}},l.a.createElement(se,null)),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement(X,null),l.a.createElement("br",null),f.status?l.a.createElement("p",{style:{backgroundColor:"green",color:"#fff",fontSize:"medium",margin:"2%",padding:"2%"}}," ",f.type," drive (",f.email,") added successfully"):f.message.length>0?l.a.createElement("p",{style:{backgroundColor:"red",color:"#fff",fontSize:"medium",margin:"2%",padding:"2%"}}," ",f.message):null,l.a.createElement("br",null),v.status?l.a.createElement("p",{style:{backgroundColor:"green",color:"#fff",fontSize:"medium",margin:"2%",padding:"2%"}}," Drive removed successfully"):v.message.length>0?l.a.createElement("p",{style:{backgroundColor:"red",color:"#fff",fontSize:"medium",margin:"2%",padding:"2%"}}," ",v.message):null),l.a.createElement("div",{className:"col-sm-2"},l.a.createElement(ie,null),l.a.createElement("div",{className:"cardHeader",style:{marginTop:"2%"}},l.a.createElement("button",{className:"uploadButton",onClick:function(){A(!0)}}," Upload File")),l.a.createElement(de,{show:T,handleClose:function(){A(!1)}})))),l.a.createElement(P,null))},be=a(93);var Ee=function(){var e=Object(be.a)(),t=e.register,a=e.watch,r=e.errors,o=e.handleSubmit,s=Object(i.e)(),u=Object(n.useState)(!1),m=Object(c.a)(u,2),d=m[0],f=m[1],g=Object(n.useContext)(p),b=Object(c.a)(g,2),E=(b[0],b[1]);return console.log("register"),l.a.createElement("div",null,l.a.createElement("form",{onSubmit:o((function(e,t){J.a.post("/user/auth/register",e).then((function(e){e.data.status?(console.log("successful signup"),E({username:e.data.username,status:e.data.status}),s.push("/user/home/".concat(e.data.username))):f(!0)})).catch((function(e){console.error(e)})),console.log(e),t.preventDefault(),t.target.reset()}))},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"User Name",name:"username",ref:t,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",ref:t})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",placeholder:"Password",className:"form-control",name:"password",ref:t({pattern:/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/}),required:!0}),r.password&&l.a.createElement("p",null,"Minimum eight characters, at least one letter and one number and a special character")),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control",name:"cnfPassword",ref:t({validate:function(e){return e===a("password")}}),placeholder:"Confirm Password",required:!0}),r.cnfPassword&&l.a.createElement("p",null,"Passwords don't match")),l.a.createElement("button",{type:"submit",className:"btn signUp"},"Register"),d&&l.a.createElement("p",null," Sorry, email id already exists!")))};var ve=function(){var e=Object(be.a)(),t=e.register,a=(e.watch,e.errors,e.handleSubmit),r=Object(i.e)(),o=Object(n.useState)(!1),s=Object(c.a)(o,2),u=s[0],m=s[1],d=Object(n.useContext)(p),f=Object(c.a)(d,2),g=(f[0],f[1]);return console.log("login tab"),l.a.createElement("div",null,l.a.createElement("form",{onSubmit:a((function(e,t){J.a.post("/user/auth/login",e).then((function(e){e.data.authenticate?(console.log("response: ",e.data),g({username:e.data.username,status:e.data.authenticate}),r.push("/user/home/".concat(e.data.username))):m(!0)})).catch((function(e){console.error(e)})),t.preventDefault(),t.target.reset()}))},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",ref:t})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",placeholder:"Password",className:"form-control",name:"password",ref:t,required:!0})),l.a.createElement("button",{type:"submit",className:"btn signUp"},"Login"),u&&l.a.createElement("p",null,"Failed to login, please try again")))};var he=function(){console.log("environment :","production");var e=g()("container","mt-5"),t=g()("nav","nav-tabs"),a=g()("nav-link","active");console.log("sign up");var r=Object(n.useState)(!1),o=Object(c.a)(r,2),s=o[0],i=o[1];return l.a.createElement("div",null,l.a.createElement(M,null),l.a.createElement("div",{className:e},l.a.createElement("ul",{className:t},l.a.createElement("li",{className:"nav-item"},l.a.createElement("button",{onClick:function(){i(!1)},className:a},"Login")),l.a.createElement("li",{style:{paddingLeft:"0.5rem"},className:"nav-item"},l.a.createElement("button",{onClick:function(){i(!0)},className:"nav-link"},"Register"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},s?l.a.createElement("div",{style:{paddingTop:"2%"}},l.a.createElement(Ee,null)):l.a.createElement("div",null,l.a.createElement("div",{className:"card-body"},l.a.createElement(ve,null)))),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("div",null,l.a.createElement("h1",{style:{textShadow:"0.5px 0.5px #440c05"}},"OneStorage"),l.a.createElement("ul",null,l.a.createElement("h3",null,"One interface for multiple cloud storages!"),l.a.createElement("ul",null,l.a.createElement("li",null," Add your google drive, one drive and dropbox accounts"),l.a.createElement("li",null," Access all your files in an organized way, in one place"),l.a.createElement("li",null," Manage multilple cloud storages with a single interface - realize more storage!")),l.a.createElement("img",{src:F.a,style:{position:"absolute",right:"1%"},width:"600",height:"450",alt:"oneStorage logo"})))))))};var Oe=function(){var e=Object(n.useContext)(p),t=Object(c.a)(e,2),a=t[0];return t[1],l.a.createElement("div",null,l.a.createElement(V,null,l.a.createElement(z,null,l.a.createElement(C,null,l.a.createElement(v,null,l.a.createElement(j,null,l.a.createElement(O,null,l.a.createElement(s.a,null,a.status?l.a.createElement(i.a,{path:"/",exact:!0,component:pe}):l.a.createElement(i.a,{path:"/",exact:!0,component:he}),a.status?l.a.createElement(i.a,{path:"/user/home/:userName",exact:!0,component:pe}):l.a.createElement(i.a,{path:"/user/home/:userName",exact:!0,component:he})))))))))};a(210),a(211);o.a.render(l.a.createElement(b,null,l.a.createElement(Oe,null)),document.getElementById("root"))},53:function(e,t,a){e.exports=a.p+"static/media/oneStorage.1ca34507.png"}},[[150,1,2]]]);
//# sourceMappingURL=main.ff167874.chunk.js.map