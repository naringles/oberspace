{"ast":null,"code":"var _jsxFileName = \"/Users/naringles/Desktop/OneStorage/frontend/src/components/FileList.jsx\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { LoginContext } from \"./LoginContext\";\nimport { DrivesContext } from \"./DrivesRepo\";\nimport { FilesContext } from \"./FilesRepo\";\nimport { SearchContext, FilterContext } from \"./SearchContext\";\nimport _ from \"lodash\";\nimport SkipNextIcon from \"@material-ui/icons/SkipNext\";\nimport SkipPreviousIcon from \"@material-ui/icons/SkipPrevious\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport { Card } from \"react-bootstrap\";\nimport classNames from \"classnames\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nfunction FileList({\n  match\n}) {\n  const {\n    searchVal,\n    setSearchVal\n  } = useContext(SearchContext);\n  const {\n    filterVal,\n    setFilterVal\n  } = useContext(FilterContext);\n  let history = useHistory();\n\n  if (window.location.hash === \"#_=_\") {\n    history.replaceState ? history.replaceState(null, null, window.location.href.split(\"#\")[0]) : window.location.hash = \"\";\n  }\n\n  const {\n    drives,\n    setDrives\n  } = useContext(DrivesContext);\n  const {\n    files,\n    setFiles\n  } = useContext(FilesContext);\n  const [fileList, setFileList] = useState(files);\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  const [markers, setMarkers] = useState({\n    start: 0,\n    end: 10\n  });\n  const mimeSuffixName = [\"octet-stream\", \"vnd.google-apps.spreadsheet\", \"vnd.google-apps.document\", \"vnd.google-apps.presentation\", \"pdf\"];\n  const mimeSuffixValue = [\"Plain\", \"Spreadsheet\", \"WordDocument\", \"PowerPoint\", \"PDF\"];\n  const toolTipClasses = classNames(\"\");\n  const [visibleArray, setVisibleArray] = useState(fileList.slice(markers.start, markers.end));\n  useEffect(() => {\n    console.log(\"visible array refresh due to marker\");\n    setVisibleArray(fileList.slice(markers.start, markers.end));\n  }, [markers]);\n  useEffect(() => {\n    console.log(\"marker refresh on new files arrival\");\n    setMarkers({\n      start: 0,\n      end: 10\n    });\n  }, [fileList]);\n  useEffect(() => {\n    if (searchVal !== null) {\n      console.log(\"search val : \", searchVal);\n      setVisibleArray(fileList.filter(file => file.fileName === searchVal));\n    } else {\n      console.log(\"search val is null\");\n      setVisibleArray(fileList.slice(markers.start, markers.end));\n    }\n  }, [searchVal]);\n  useEffect(() => {\n    if (filterVal !== \"\") {\n      setFileList(files.filter(file => file.fileFolderType === filterVal));\n    } else {\n      setFileList(files);\n    }\n  }, [filterVal, files]);\n\n  const clearFilter = () => {\n    setFilterVal(\"\");\n  };\n\n  const goPrev = () => {\n    if (markers.start >= 10) {\n      setMarkers({\n        start: markers.start - 10,\n        end: markers.end - 10\n      });\n    }\n  };\n\n  const goNext = () => {\n    if (markers.end <= fileList.length - 10) {\n      setMarkers({\n        start: markers.start + 10,\n        end: markers.end + 10\n      });\n    }\n  };\n\n  const [delFileConf, setDelFileConf] = useState(-1);\n\n  const handleDelete = (fId, fName, folderType, event) => {\n    axios.post(\"/action/file/delete\", {\n      id: fId,\n      folderType: folderType,\n      name: fName\n    }).then(resp => {\n      console.log(\"Resp data: \", resp.data);\n\n      if (resp.data.success) {\n        setFiles(files.filter(file => file.fileId !== fId));\n      }\n    }).then(() => {\n      setDelFileConf(-1);\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cardHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, \"Files\", filterVal !== \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"absolute\",\n      left: \"15%\",\n      top: \"1.5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, \"File Type :\", filterVal, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"fileFilter\",\n    title: \"clear\",\n    onClick: clearFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ClearIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  })))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"absolute\",\n      right: \"1%\",\n      top: \"1%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"prevIconB\",\n    onClick: goPrev,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SkipPreviousIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  })), \" \", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"nextIconB\",\n    onClick: goNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SkipNextIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(Card.Body, {\n    className: \"fileList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, visibleArray.map((file, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: file.fileId,\n    className: \"fileRow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: file.webViewLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, file.fileName, file.size !== undefined ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tooltiptext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, (file.size / (1024 * 1024)).toFixed(3), \" MB\", \" \") : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }, delFileConf === index ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger\",\n    onClick: e => handleDelete(file.fileId, file.fileName, file.fileFolderType, e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }, \" \", \"\\uD655\\uC778\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 32\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    onClick: () => setDelFileConf(-1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  }, \" \", \"\\uCDE8\\uC18C\")) : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"fileDelete\",\n    onClick: () => setDelFileConf(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 23\n    }\n  }, \" \", /*#__PURE__*/React.createElement(DeleteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 25\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      position: \"absolute\",\n      right: \"1%\",\n      bottom: \"-5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default FileList;","map":{"version":3,"sources":["/Users/naringles/Desktop/OneStorage/frontend/src/components/FileList.jsx"],"names":["React","useState","useEffect","useContext","axios","useHistory","LoginContext","DrivesContext","FilesContext","SearchContext","FilterContext","_","SkipNextIcon","SkipPreviousIcon","ClearIcon","Card","classNames","DeleteIcon","FileList","match","searchVal","setSearchVal","filterVal","setFilterVal","history","window","location","hash","replaceState","href","split","drives","setDrives","files","setFiles","fileList","setFileList","loggedIn","setLoggedIn","markers","setMarkers","start","end","mimeSuffixName","mimeSuffixValue","toolTipClasses","visibleArray","setVisibleArray","slice","console","log","filter","file","fileName","fileFolderType","clearFilter","goPrev","goNext","length","delFileConf","setDelFileConf","handleDelete","fId","fName","folderType","event","post","id","name","then","resp","data","success","fileId","catch","err","error","position","left","top","right","map","index","webViewLink","size","undefined","toFixed","e","bottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { LoginContext } from \"./LoginContext\";\nimport { DrivesContext } from \"./DrivesRepo\";\nimport { FilesContext } from \"./FilesRepo\";\nimport { SearchContext, FilterContext } from \"./SearchContext\";\nimport _ from \"lodash\";\nimport SkipNextIcon from \"@material-ui/icons/SkipNext\";\nimport SkipPreviousIcon from \"@material-ui/icons/SkipPrevious\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport { Card } from \"react-bootstrap\";\nimport classNames from \"classnames\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nfunction FileList({ match }) {\n  const { searchVal, setSearchVal } = useContext(SearchContext);\n  const { filterVal, setFilterVal } = useContext(FilterContext);\n  let history = useHistory();\n  if (window.location.hash === \"#_=_\") {\n    history.replaceState\n      ? history.replaceState(null, null, window.location.href.split(\"#\")[0])\n      : (window.location.hash = \"\");\n  }\n  const { drives, setDrives } = useContext(DrivesContext);\n  const { files, setFiles } = useContext(FilesContext);\n  const [fileList, setFileList] = useState(files);\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  const [markers, setMarkers] = useState({ start: 0, end: 10 });\n  const mimeSuffixName = [\n    \"octet-stream\",\n    \"vnd.google-apps.spreadsheet\",\n    \"vnd.google-apps.document\",\n    \"vnd.google-apps.presentation\",\n    \"pdf\",\n  ];\n  const mimeSuffixValue = [\n    \"Plain\",\n    \"Spreadsheet\",\n    \"WordDocument\",\n    \"PowerPoint\",\n    \"PDF\",\n  ];\n  const toolTipClasses = classNames(\"\");\n\n  const [visibleArray, setVisibleArray] = useState(\n    fileList.slice(markers.start, markers.end)\n  );\n  useEffect(() => {\n    console.log(\"visible array refresh due to marker\");\n    setVisibleArray(fileList.slice(markers.start, markers.end));\n  }, [markers]);\n\n  useEffect(() => {\n    console.log(\"marker refresh on new files arrival\");\n    setMarkers({ start: 0, end: 10 });\n  }, [fileList]);\n\n  useEffect(() => {\n    if (searchVal !== null) {\n      console.log(\"search val : \", searchVal);\n      setVisibleArray(fileList.filter((file) => file.fileName === searchVal));\n    } else {\n      console.log(\"search val is null\");\n      setVisibleArray(fileList.slice(markers.start, markers.end));\n    }\n  }, [searchVal]);\n\n  useEffect(() => {\n    if (filterVal !== \"\") {\n      setFileList(files.filter((file) => file.fileFolderType === filterVal));\n    } else {\n      setFileList(files);\n    }\n  }, [filterVal, files]);\n\n  const clearFilter = () => {\n    setFilterVal(\"\");\n  };\n\n  const goPrev = () => {\n    if (markers.start >= 10) {\n      setMarkers({ start: markers.start - 10, end: markers.end - 10 });\n    }\n  };\n  const goNext = () => {\n    if (markers.end <= fileList.length - 10) {\n      setMarkers({ start: markers.start + 10, end: markers.end + 10 });\n    }\n  };\n  const [delFileConf, setDelFileConf] = useState(-1);\n  const handleDelete = (fId, fName, folderType, event) => {\n    axios\n      .post(\"/action/file/delete\", {\n        id: fId,\n        folderType: folderType,\n        name: fName,\n      })\n      .then((resp) => {\n        console.log(\"Resp data: \", resp.data);\n        if (resp.data.success) {\n          setFiles(files.filter((file) => file.fileId !== fId));\n        }\n      })\n      .then(() => {\n        setDelFileConf(-1);\n      })\n\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n  return (\n    <Card>\n      <div className=\"cardHeader\">\n        <Card.Header>\n          Files\n          {filterVal !== \"\" ? (\n            <div style={{ position: \"absolute\", left: \"15%\", top: \"1.5%\" }}>\n              <p>\n                File Type :{filterVal}{\" \"}\n                <button\n                  className=\"fileFilter\"\n                  title=\"clear\"\n                  onClick={clearFilter}\n                >\n                  <ClearIcon />\n                </button>\n              </p>\n            </div>\n          ) : null}\n          <div style={{ position: \"absolute\", right: \"1%\", top: \"1%\" }}>\n            <button className=\"prevIconB\" onClick={goPrev}>\n              <SkipPreviousIcon />\n            </button>{\" \"}\n            <button className=\"nextIconB\" onClick={goNext}>\n              <SkipNextIcon />\n            </button>\n          </div>\n        </Card.Header>\n      </div>\n      <Card.Body className=\"fileList\">\n        <div className=\"list-group\">\n          <ul>\n            {visibleArray.map((file, index) => (\n              <div key={file.fileId} className=\"fileRow\">\n                <div className=\"row\">\n                  <div className=\"col-md-10\">\n                    <a href={file.webViewLink}>\n                      {file.fileName}\n                      {file.size !== undefined ? (\n                        <span className=\"tooltiptext\">\n                          {(file.size / (1024 * 1024)).toFixed(3)} MB{\" \"}\n                        </span>\n                      ) : null}\n                    </a>\n                  </div>\n                  <div className=\"col-md-2\">\n                    {delFileConf === index ? (\n                      <div>\n                        <button\n                          className=\"btn btn-danger\"\n                          onClick={(e) =>\n                            handleDelete(\n                              file.fileId,\n                              file.fileName,\n                              file.fileFolderType,\n                              e\n                            )\n                          }\n                        >\n                          {\" \"}\n                          확인\n                        </button>{\" \"}\n                        <br /> <br />{\" \"}\n                        <button\n                          className=\"btn btn-success\"\n                          onClick={() => setDelFileConf(-1)}\n                        >\n                          {\" \"}\n                          취소\n                        </button>\n                      </div>\n                    ) : (\n                      <button\n                        className=\"fileDelete\"\n                        onClick={() => setDelFileConf(index)}\n                      >\n                        {\" \"}\n                        <DeleteIcon />\n                      </button>\n                    )}\n                  </div>\n                  {/* </li> */}\n                </div>\n              </div>\n            ))}\n          </ul>\n          <div\n            className=\"row\"\n            style={{ position: \"absolute\", right: \"1%\", bottom: \"-5%\" }}\n          ></div>\n        </div>\n      </Card.Body>\n    </Card>\n  );\n}\n\nexport default FileList;\n"]},"metadata":{},"sourceType":"module"}