{"ast":null,"code":"import _slicedToArray from\"/Users/naringles/Desktop/OneStorage/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{useForm}from\"react-hook-form\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";import{LoginContext}from\"./LoginContext\";function LoginTab(){var _useForm=useForm(),register=_useForm.register,watch=_useForm.watch,errors=_useForm.errors,handleSubmit=_useForm.handleSubmit;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loginFail=_useState2[0],setLoginFail=_useState2[1];var _useContext=useContext(LoginContext),_useContext2=_slicedToArray(_useContext,2),loggedIn=_useContext2[0],setLoggedIn=_useContext2[1];console.log(\"login tab\");var onSubmit=function onSubmit(data,e){axios.post(\"/user/auth/login/\",data).then(function(response){if(response.data.authenticate){console.log(\"response: \",response.data);setLoggedIn({username:response.data.username,status:response.data.authenticate});history.push(\"/user/home/\".concat(response.data.username));}else{setLoginFail(true);}}).catch(function(err){console.error(err);});e.preventDefault();e.target.reset();};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Email\",name:\"email\",ref:register})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Password\",className:\"form-control\",name:\"password\",ref:register,required:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn signUp\"},\"Login\"),loginFail&&/*#__PURE__*/React.createElement(\"p\",null,\"\\uB85C\\uADF8\\uC778\\uC5D0 \\uC2E4\\uD328\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD574\\uC8FC\\uC138\\uC694.\")));}export default LoginTab;","map":{"version":3,"sources":["/Users/naringles/Desktop/OneStorage/frontend/src/components/LoginTab.jsx"],"names":["React","useState","useContext","useForm","useHistory","axios","LoginContext","LoginTab","register","watch","errors","handleSubmit","history","loginFail","setLoginFail","loggedIn","setLoggedIn","console","log","onSubmit","data","e","post","then","response","authenticate","username","status","push","catch","err","error","preventDefault","target","reset"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,KAA6B,gBAA7B,CACA,QAASC,CAAAA,QAAT,EAAoB,cACgCJ,OAAO,EADvC,CACVK,QADU,UACVA,QADU,CACAC,KADA,UACAA,KADA,CACOC,MADP,UACOA,MADP,CACeC,YADf,UACeA,YADf,CAElB,GAAIC,CAAAA,OAAO,CAAGR,UAAU,EAAxB,CAFkB,cAGgBH,QAAQ,CAAC,KAAD,CAHxB,wCAGXY,SAHW,eAGAC,YAHA,+BAIcZ,UAAU,CAACI,YAAD,CAJxB,4CAIXS,QAJW,iBAIDC,WAJC,iBAKlBC,OAAO,CAACC,GAAR,CAAY,WAAZ,EAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,IAAD,CAAOC,CAAP,CAAa,CAC5BhB,KAAK,CACFiB,IADH,CACQ,mBADR,CAC6BF,IAD7B,EAEGG,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACJ,IAAT,CAAcK,YAAlB,CAAgC,CAC9BR,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BM,QAAQ,CAACJ,IAAnC,EACAJ,WAAW,CAAC,CACVU,QAAQ,CAAEF,QAAQ,CAACJ,IAAT,CAAcM,QADd,CAEVC,MAAM,CAAEH,QAAQ,CAACJ,IAAT,CAAcK,YAFZ,CAAD,CAAX,CAKAb,OAAO,CAACgB,IAAR,sBAA2BJ,QAAQ,CAACJ,IAAT,CAAcM,QAAzC,GACD,CARD,IAQO,CACLZ,YAAY,CAAC,IAAD,CAAZ,CACD,CACF,CAdH,EAeGe,KAfH,CAeS,SAACC,GAAD,CAAS,CACdb,OAAO,CAACc,KAAR,CAAcD,GAAd,EACD,CAjBH,EAmBAT,CAAC,CAACW,cAAF,GACAX,CAAC,CAACY,MAAF,CAASC,KAAT,GACD,CAtBD,CAwBA,mBACE,4CACE,4BAAM,QAAQ,CAAEvB,YAAY,CAACQ,QAAD,CAA5B,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,OAHd,CAIE,IAAI,CAAC,OAJP,CAKE,GAAG,CAAEX,QALP,EADF,CADF,cAUE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,SAAS,CAAC,cAHZ,CAIE,IAAI,CAAC,UAJP,CAKE,GAAG,CAAEA,QALP,CAME,QAAQ,KANV,EADF,CAVF,cAoBE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,YAAhC,UApBF,CAuBGK,SAAS,eAAI,iJAvBhB,CADF,CADF,CA6BD,CAED,cAAeN,CAAAA,QAAf","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LoginContext } from \"./LoginContext\";\nfunction LoginTab() {\n  const { register, watch, errors, handleSubmit } = useForm();\n  let history = useHistory();\n  const [loginFail, setLoginFail] = useState(false);\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  console.log(\"login tab\");\n\n  const onSubmit = (data, e) => {\n    axios\n      .post(\"/user/auth/login/\", data)\n      .then((response) => {\n        if (response.data.authenticate) {\n          console.log(\"response: \", response.data);\n          setLoggedIn({\n            username: response.data.username,\n            status: response.data.authenticate,\n          });\n\n          history.push(`/user/home/${response.data.username}`);\n        } else {\n          setLoginFail(true);\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n\n    e.preventDefault();\n    e.target.reset();\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"form-group\">\n          <input\n            type=\"email\"\n            className=\"form-control\"\n            placeholder=\"Email\"\n            name=\"email\"\n            ref={register}\n          />\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            className=\"form-control\"\n            name=\"password\"\n            ref={register}\n            required\n          />\n        </div>\n        <button type=\"submit\" className=\"btn signUp\">\n          Login\n        </button>\n        {loginFail && <p>로그인에 실패했습니다. 다시 시도해주세요.</p>}\n      </form>\n    </div>\n  );\n}\n\nexport default LoginTab;\n"]},"metadata":{},"sourceType":"module"}