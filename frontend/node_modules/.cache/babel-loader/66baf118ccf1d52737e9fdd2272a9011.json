{"ast":null,"code":"import _slicedToArray from\"/Users/naringles/Desktop/OneStorage/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{useForm}from\"react-hook-form\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";import{LoginContext}from\"./LoginContext\";function Register(){var _useForm=useForm(),register=_useForm.register,watch=_useForm.watch,errors=_useForm.errors,handleSubmit=_useForm.handleSubmit;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),nameTaken=_useState2[0],setNameTaken=_useState2[1];var _useContext=useContext(LoginContext),_useContext2=_slicedToArray(_useContext,2),loggedIn=_useContext2[0],setLoggedIn=_useContext2[1];console.log(\"register\");var onSubmit=function onSubmit(data,e){axios.post(\"/user/auth/register\",data).then(function(response){if(response.data.status){console.log(\"successful signup\");setLoggedIn({username:response.data.username,status:response.data.status});history.push(\"/user/home/\".concat(response.data.username));}else{setNameTaken(true);}}).catch(function(err){console.error(err);});console.log(data);e.preventDefault();e.target.reset();};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"User Name\",name:\"username\",ref:register,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Email\",name:\"email\",ref:register})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Password\",className:\"form-control\",name:\"password\",ref:register({pattern:/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/}),required:true}),errors.password&&/*#__PURE__*/React.createElement(\"p\",null,\"\\uC801\\uC5B4\\uB3C4 8\\uC790 \\uC774\\uC0C1, \\uC801\\uC5B4\\uB3C4 \\uD558\\uB098\\uC529\\uC758 \\uBB38\\uC790,\\uC22B\\uC790,\\uD2B9\\uC218\\uBB38\\uC790\\uAC00 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",name:\"cnfPassword\",ref:register({validate:function validate(value){return value===watch(\"password\");}}),placeholder:\"Confirm Password\",required:true}),errors.cnfPassword&&/*#__PURE__*/React.createElement(\"p\",null,\"\\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\")),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn signUp\"},\"\\uD68C\\uC6D0\\uAC00\\uC785\"),nameTaken&&/*#__PURE__*/React.createElement(\"p\",null,\" \\uC774\\uBA54\\uC77C\\uC774 \\uC774\\uBBF8 \\uC874\\uC7AC\\uD569\\uB2C8\\uB2E4.\")));}export default Register;","map":{"version":3,"sources":["/Users/naringles/Desktop/OneStorage/frontend/src/components/RegisterTab.jsx"],"names":["React","useState","useContext","useForm","useHistory","axios","LoginContext","Register","register","watch","errors","handleSubmit","history","nameTaken","setNameTaken","loggedIn","setLoggedIn","console","log","onSubmit","data","e","post","then","response","status","username","push","catch","err","error","preventDefault","target","reset","pattern","password","validate","value","cnfPassword"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LoginContext } from \"./LoginContext\";\nfunction Register() {\n  const { register, watch, errors, handleSubmit } = useForm();\n  let history = useHistory();\n  const [nameTaken, setNameTaken] = useState(false);\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  console.log(\"register\");\n\n  const onSubmit = (data, e) => {\n    axios\n      .post(\"/user/auth/register\", data)\n      .then((response) => {\n        if (response.data.status) {\n          console.log(\"successful signup\");\n          setLoggedIn({\n            username: response.data.username,\n            status: response.data.status,\n          });\n          history.push(`/user/home/${response.data.username}`);\n        } else {\n          setNameTaken(true);\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n\n    console.log(data);\n    e.preventDefault();\n    e.target.reset();\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"form-group\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"User Name\"\n            name=\"username\"\n            ref={register}\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <input\n            type=\"email\"\n            className=\"form-control\"\n            placeholder=\"Email\"\n            name=\"email\"\n            ref={register}\n          />\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            className=\"form-control\"\n            name=\"password\"\n            ref={register({\n              pattern: /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,\n            })}\n            required\n          />\n          {errors.password && (\n            <p>\n              적어도 8자 이상, 적어도 하나씩의 문자,숫자,특수문자가 필요합니다.\n            </p>\n          )}\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            className=\"form-control\"\n            name=\"cnfPassword\"\n            ref={register({ validate: (value) => value === watch(\"password\") })}\n            placeholder=\"Confirm Password\"\n            required\n          />\n          {errors.cnfPassword && <p>비밀번호가 일치하지 않습니다.</p>}\n        </div>\n\n        <button type=\"submit\" className=\"btn signUp\">\n          회원가입\n        </button>\n        {nameTaken && <p> 이메일이 이미 존재합니다.</p>}\n      </form>\n    </div>\n  );\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}