{"ast":null,"code":"var _jsxFileName = \"/Users/naringles/Desktop/OneStorage/frontend/src/components/UserHome.jsx\";\nimport React, { useState, useEffect, useContext, Component } from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { LoginContext } from \"./LoginContext\";\nimport { DrivesContext, DriveDeleteContext } from \"./DrivesRepo\";\nimport { DarkContext } from \"./SearchContext\";\nimport { FilesContext } from \"./FilesRepo\";\nimport FileList from \"./FileList\";\nimport DriveList from \"./DriveList\";\nimport AddDrives from \"./AddDrives\";\nimport FileUpload from \"./FileUpload\";\nimport classNames from \"classnames\";\nimport _ from \"lodash\";\nimport sockIO from \"socket.io-client\";\n\nfunction Home({\n  match\n}) {\n  const backEndPort = \"http://localhost:3000\"; // let backEndPort;\n  // if (process.env.NODE_ENV === \"production\") {\n  //   backEndPort = \"https://desolate-bastion-47247.herokuapp.com/\";\n  // } else {\n  //   backEndPort = \"http://localhost:3000\";\n  // }\n\n  const customSwitchClass = classNames(\"custom-control\", \"custom-switch\");\n  const mimeSuffixName = [\"octet-stream\", \"vnd.google-apps.spreadsheet\", \"vnd.google-apps.document\", \"vnd.google-apps.presentation\", \"pdf\"];\n  const mimeSuffixValue = [\"Plain\", \"Spreadsheet\", \"WordDocument\", \"PowerPoint\", \"PDF\"];\n  const mimeSuffixMappings = new Object();\n  useEffect(() => {\n    mimeSuffixName.forEach((item, index) => {\n      mimeSuffixMappings[item] = mimeSuffixValue[index];\n    });\n  }, []);\n  useEffect(() => {\n    let socketIO;\n    console.log(\"environment :\", process.env.NODE_ENV); // if (process.env.NODE_ENV === \"production\") {\n    //   socketIO = sockIO.connect();\n    // } else {\n    //   socketIO = sockIO.connect(backEndPort);\n    // }\n\n    socketIO = sockIO.connect(backEndPort);\n    console.log(\"socket is :\", socketIO);\n    socketIO.on(\"oneDriveFiles\", function (data) {\n      console.log(\"Incoming onedriveFiles:\", data.files.filter(file => new Date(file.createdAt) >= new Date(JSON.parse(sessionStorage.lastFetchDt)))); // console.log(\"lastFetchedDt\",JSON.parse(sessionStorage.getItem(\"lastFetchDt\")));\n\n      setFiles(oldFiles => _.unionBy(data.files.filter(file => new Date(file.createdAt) >= new Date(JSON.parse(sessionStorage.lastFetchDt))), oldFiles, \"fileId\"));\n    });\n    socketIO.on(\"dbxFiles\", function (data) {\n      console.log(\"Incoming dbxFiles:\", data.files.filter(file => new Date(file.createdAt) >= new Date(JSON.parse(sessionStorage.lastFetchDt)))); // console.log(\"last fetch dt\",JSON.parse(sessionStorage.lastFetchDt));\n\n      setFiles(oldFiles => _.unionBy(data.files.filter(file => new Date(file.createdAt) >= new Date(JSON.parse(sessionStorage.lastFetchDt))), oldFiles, \"fileId\"));\n    });\n    socketIO.on(\"googleFiles\", function (data) {\n      console.log(\"Incoming googleFiles:\", data.files.filter(file => new Date(file.createdAt) >= new Date(JSON.parse(sessionStorage.lastFetchDt))));\n      setFiles(oldFiles => _.unionBy(data.files.filter(file => new Date(file.createdAt) >= new Date(JSON.parse(sessionStorage.lastFetchDt))), oldFiles, \"fileId\"));\n    });\n  }, []);\n  let history = useHistory(); // if (window.location.hash === \"#_=_\") {\n  //   history.replaceState\n  //     ? history.replaceState(null, null, window.location.href.split(\"#\")[0])\n  //     : (window.location.hash = \"\");\n  // }\n\n  const [driveAdded, setDriveAdded] = useState({\n    status: false,\n    type: \"\",\n    email: \"\",\n    message: \"\"\n  });\n  const {\n    driveDeleted,\n    setDriveDeleted\n  } = useContext(DriveDeleteContext);\n  const {\n    darkMode,\n    setDarkMode\n  } = useContext(DarkContext);\n  useEffect(() => {\n    const queryString = window.location.search;\n    console.log(\"queryString:\", queryString);\n\n    if (typeof queryString !== undefined && queryString !== \"\") {\n      const urlParams = new URLSearchParams(queryString);\n\n      if (urlParams.get(\"success\") === \"true\") {\n        console.log(\"status is: \", urlParams.get(\"success\"));\n        console.log(\"attempt is: \", urlParams.get(\"attempt\"));\n        console.log(\"message : \", urlParams.get(\"message\"));\n\n        if (urlParams.get(\"attempt\").includes(\"add\")) {\n          console.log(\"new Drive is: \", urlParams.get(\"newDrive\"));\n          console.log(\"new Drive type is: \", urlParams.get(\"newDriveType\"));\n          setDriveAdded({\n            status: true,\n            type: urlParams.get(\"newDriveType\"),\n            email: urlParams.get(\"newDrive\"),\n            message: urlParams.get(\"message\")\n          });\n        }\n      } else {\n        console.log(\"status is: \", urlParams.get(\"success\"));\n        console.log(\"status is: \", urlParams.get(\"attempt\"));\n        console.log(\"message : \", urlParams.get(\"message\"));\n\n        if (urlParams.get(\"attempt\").includes(\"add\")) {\n          setDriveAdded({\n            status: false,\n            type: \"NA\",\n            email: \"NA\",\n            message: urlParams.get(\"message\")\n          });\n        }\n      }\n\n      setTimeout(() => setDriveAdded({\n        status: false,\n        type: \"\",\n        email: \"\",\n        message: \"\"\n      }), 10000);\n      window.history.replaceState({}, null, window.location.href.split(\"?\")[0]);\n    }\n\n    console.log(\"dark mode: \", darkMode);\n\n    if (darkMode) {\n      var elements = document.querySelectorAll(\"body,.card,.list-group-item,.tooltiptext\");\n      elements.forEach(element => {\n        element.style.backgroundColor = \"#000\";\n        element.style.color = \"#fff\";\n      });\n    } else {\n      var elements = document.querySelectorAll(\"body,.card,.list-group-item,.tooltiptext\");\n      elements.forEach(element => {\n        element.style.backgroundColor = \"#fff\";\n        element.style.color = \"#000\";\n      });\n    }\n\n    console.log(\"dark mode: \", darkMode);\n\n    if (darkMode) {\n      var elements = document.querySelectorAll(\"body,.card,.list-group-item,.tooltiptext\");\n      elements.forEach(element => {\n        element.style.backgroundColor = \"#000\";\n        element.style.color = \"#fff\";\n      });\n    } else {\n      var elements = document.querySelectorAll(\"body,.card,.list-group-item,.tooltiptext\");\n      elements.forEach(element => {\n        element.style.backgroundColor = \"#fff\";\n        element.style.color = \"#000\";\n      });\n    }\n  }, []);\n  const {\n    drives,\n    setDrives\n  } = useContext(DrivesContext);\n  const {\n    files,\n    setFiles\n  } = useContext(FilesContext);\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  const [showUpload, setShow] = useState(false);\n  console.log(\" user home page\"); // const { params: { userName } = {} } = match;\n\n  useEffect(() => {\n    axios.get(\"/user/data/read\", {\n      withCredentials: true\n    }).then(async response => {\n      sessionStorage.setItem(\"lastFetchDt\", JSON.stringify(new Date()));\n\n      if (response.data.success) {\n        console.log(\"response: \", response.data);\n\n        if (response.data.drives.length > 0) {\n          setDrives(response.data.drives); // console.log(\"files received:\",response.data.drives.map(({ files }) => files).flat());\n\n          setFiles(response.data.drives.map(({\n            files\n          }) => files).flat().sort(function (a, b) {\n            return new Date(b.createdAt) - new Date(a.createdAt);\n          }).map(file => {\n            if (file.fileFolderType.includes(\"undefined\")) {\n              let mimeSuffArr = file.mimeType.split(\"/\");\n              let mimeSuff = mimeSuffArr[mimeSuffArr.length - 1].toLowerCase();\n\n              if (typeof mimeSuffixMappings[mimeSuff] !== \"undefined\") {\n                file.fileFolderType = mimeSuffixMappings[mimeSuff];\n              } else {\n                file.fileFolderType = \"Others\";\n              }\n            }\n\n            return file;\n          }));\n        } else {\n          setDrives([]);\n        }\n      } else {\n        history.push(\"/\");\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n\n  const triggerUpload = () => {\n    setShow(true);\n  };\n\n  const handleUploadModalClose = () => {\n    setShow(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }\n  }), loggedIn.status && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      paddingTop: \"2%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-2\",\n    style: {\n      padding: \"0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DriveList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FileList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 15\n    }\n  }), driveAdded.status ? /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      backgroundColor: \"green\",\n      color: \"#fff\",\n      fontSize: \"medium\",\n      margin: \"2%\",\n      padding: \"2%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 17\n    }\n  }, \" \", driveAdded.type, \" drive (\", driveAdded.email, \") added successfully\") : driveAdded.message.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      backgroundColor: \"red\",\n      color: \"#fff\",\n      fontSize: \"medium\",\n      margin: \"2%\",\n      padding: \"2%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }\n  }, \" \", driveAdded.message) : null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 15\n    }\n  }), driveDeleted.status ? /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      backgroundColor: \"green\",\n      color: \"#fff\",\n      fontSize: \"medium\",\n      margin: \"2%\",\n      padding: \"2%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 17\n    }\n  }, \" \", \"Drive removed successfully\") : driveDeleted.message.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      backgroundColor: \"red\",\n      color: \"#fff\",\n      fontSize: \"medium\",\n      margin: \"2%\",\n      padding: \"2%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 17\n    }\n  }, \" \", driveDeleted.message) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AddDrives, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cardHeader\",\n    style: {\n      marginTop: \"2%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"uploadButton\",\n    onClick: triggerUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 17\n    }\n  }, \" \", \"Upload File\")), /*#__PURE__*/React.createElement(FileUpload, {\n    show: showUpload,\n    handleClose: handleUploadModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/naringles/Desktop/OneStorage/frontend/src/components/UserHome.jsx"],"names":["React","useState","useEffect","useContext","Component","Header","Footer","axios","useHistory","LoginContext","DrivesContext","DriveDeleteContext","DarkContext","FilesContext","FileList","DriveList","AddDrives","FileUpload","classNames","_","sockIO","Home","match","backEndPort","customSwitchClass","mimeSuffixName","mimeSuffixValue","mimeSuffixMappings","Object","forEach","item","index","socketIO","console","log","process","env","NODE_ENV","connect","on","data","files","filter","file","Date","createdAt","JSON","parse","sessionStorage","lastFetchDt","setFiles","oldFiles","unionBy","history","driveAdded","setDriveAdded","status","type","email","message","driveDeleted","setDriveDeleted","darkMode","setDarkMode","queryString","window","location","search","undefined","urlParams","URLSearchParams","get","includes","setTimeout","replaceState","href","split","elements","document","querySelectorAll","element","style","backgroundColor","color","drives","setDrives","loggedIn","setLoggedIn","showUpload","setShow","withCredentials","then","response","setItem","stringify","success","length","map","flat","sort","a","b","fileFolderType","mimeSuffArr","mimeType","mimeSuff","toLowerCase","push","catch","error","triggerUpload","handleUploadModalClose","paddingTop","padding","fontSize","margin","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, Component } from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { LoginContext } from \"./LoginContext\";\nimport { DrivesContext, DriveDeleteContext } from \"./DrivesRepo\";\nimport { DarkContext } from \"./SearchContext\";\nimport { FilesContext } from \"./FilesRepo\";\nimport FileList from \"./FileList\";\nimport DriveList from \"./DriveList\";\nimport AddDrives from \"./AddDrives\";\nimport FileUpload from \"./FileUpload\";\nimport classNames from \"classnames\";\nimport _ from \"lodash\";\nimport sockIO from \"socket.io-client\";\n\nfunction Home({ match }) {\n  const backEndPort = \"http://localhost:3000\";\n  // let backEndPort;\n  // if (process.env.NODE_ENV === \"production\") {\n  //   backEndPort = \"https://desolate-bastion-47247.herokuapp.com/\";\n  // } else {\n  //   backEndPort = \"http://localhost:3000\";\n  // }\n\n  const customSwitchClass = classNames(\"custom-control\", \"custom-switch\");\n  const mimeSuffixName = [\n    \"octet-stream\",\n    \"vnd.google-apps.spreadsheet\",\n    \"vnd.google-apps.document\",\n    \"vnd.google-apps.presentation\",\n    \"pdf\",\n  ];\n  const mimeSuffixValue = [\n    \"Plain\",\n    \"Spreadsheet\",\n    \"WordDocument\",\n    \"PowerPoint\",\n    \"PDF\",\n  ];\n  const mimeSuffixMappings = new Object();\n\n  useEffect(() => {\n    mimeSuffixName.forEach((item, index) => {\n      mimeSuffixMappings[item] = mimeSuffixValue[index];\n    });\n  }, []);\n\n  useEffect(() => {\n    let socketIO;\n    console.log(\"environment :\", process.env.NODE_ENV);\n    // if (process.env.NODE_ENV === \"production\") {\n    //   socketIO = sockIO.connect();\n    // } else {\n    //   socketIO = sockIO.connect(backEndPort);\n    // }\n    socketIO = sockIO.connect(backEndPort);\n    console.log(\"socket is :\", socketIO);\n    socketIO.on(\"oneDriveFiles\", function (data) {\n      console.log(\n        \"Incoming onedriveFiles:\",\n        data.files.filter(\n          (file) =>\n            new Date(file.createdAt) >=\n            new Date(JSON.parse(sessionStorage.lastFetchDt))\n        )\n      );\n      // console.log(\"lastFetchedDt\",JSON.parse(sessionStorage.getItem(\"lastFetchDt\")));\n      setFiles((oldFiles) =>\n        _.unionBy(\n          data.files.filter(\n            (file) =>\n              new Date(file.createdAt) >=\n              new Date(JSON.parse(sessionStorage.lastFetchDt))\n          ),\n          oldFiles,\n          \"fileId\"\n        )\n      );\n    });\n    socketIO.on(\"dbxFiles\", function (data) {\n      console.log(\n        \"Incoming dbxFiles:\",\n        data.files.filter(\n          (file) =>\n            new Date(file.createdAt) >=\n            new Date(JSON.parse(sessionStorage.lastFetchDt))\n        )\n      );\n      // console.log(\"last fetch dt\",JSON.parse(sessionStorage.lastFetchDt));\n      setFiles((oldFiles) =>\n        _.unionBy(\n          data.files.filter(\n            (file) =>\n              new Date(file.createdAt) >=\n              new Date(JSON.parse(sessionStorage.lastFetchDt))\n          ),\n          oldFiles,\n          \"fileId\"\n        )\n      );\n    });\n    socketIO.on(\"googleFiles\", function (data) {\n      console.log(\n        \"Incoming googleFiles:\",\n        data.files.filter(\n          (file) =>\n            new Date(file.createdAt) >=\n            new Date(JSON.parse(sessionStorage.lastFetchDt))\n        )\n      );\n      setFiles((oldFiles) =>\n        _.unionBy(\n          data.files.filter(\n            (file) =>\n              new Date(file.createdAt) >=\n              new Date(JSON.parse(sessionStorage.lastFetchDt))\n          ),\n          oldFiles,\n          \"fileId\"\n        )\n      );\n    });\n  }, []);\n\n  let history = useHistory();\n  // if (window.location.hash === \"#_=_\") {\n  //   history.replaceState\n  //     ? history.replaceState(null, null, window.location.href.split(\"#\")[0])\n  //     : (window.location.hash = \"\");\n  // }\n\n  const [driveAdded, setDriveAdded] = useState({\n    status: false,\n    type: \"\",\n    email: \"\",\n    message: \"\",\n  });\n  const { driveDeleted, setDriveDeleted } = useContext(DriveDeleteContext);\n  const { darkMode, setDarkMode } = useContext(DarkContext);\n\n  useEffect(() => {\n    const queryString = window.location.search;\n    console.log(\"queryString:\", queryString);\n    if (typeof queryString !== undefined && queryString !== \"\") {\n      const urlParams = new URLSearchParams(queryString);\n      if (urlParams.get(\"success\") === \"true\") {\n        console.log(\"status is: \", urlParams.get(\"success\"));\n        console.log(\"attempt is: \", urlParams.get(\"attempt\"));\n        console.log(\"message : \", urlParams.get(\"message\"));\n\n        if (urlParams.get(\"attempt\").includes(\"add\")) {\n          console.log(\"new Drive is: \", urlParams.get(\"newDrive\"));\n          console.log(\"new Drive type is: \", urlParams.get(\"newDriveType\"));\n          setDriveAdded({\n            status: true,\n            type: urlParams.get(\"newDriveType\"),\n            email: urlParams.get(\"newDrive\"),\n            message: urlParams.get(\"message\"),\n          });\n        }\n      } else {\n        console.log(\"status is: \", urlParams.get(\"success\"));\n        console.log(\"status is: \", urlParams.get(\"attempt\"));\n        console.log(\"message : \", urlParams.get(\"message\"));\n        if (urlParams.get(\"attempt\").includes(\"add\")) {\n          setDriveAdded({\n            status: false,\n            type: \"NA\",\n            email: \"NA\",\n            message: urlParams.get(\"message\"),\n          });\n        }\n      }\n      setTimeout(\n        () =>\n          setDriveAdded({ status: false, type: \"\", email: \"\", message: \"\" }),\n        10000\n      );\n      window.history.replaceState({}, null, window.location.href.split(\"?\")[0]);\n    }\n    console.log(\"dark mode: \", darkMode);\n    if (darkMode) {\n      var elements = document.querySelectorAll(\n        \"body,.card,.list-group-item,.tooltiptext\"\n      );\n      elements.forEach((element) => {\n        element.style.backgroundColor = \"#000\";\n        element.style.color = \"#fff\";\n      });\n    } else {\n      var elements = document.querySelectorAll(\n        \"body,.card,.list-group-item,.tooltiptext\"\n      );\n      elements.forEach((element) => {\n        element.style.backgroundColor = \"#fff\";\n        element.style.color = \"#000\";\n      });\n    }\n\n    console.log(\"dark mode: \", darkMode);\n    if (darkMode) {\n      var elements = document.querySelectorAll(\n        \"body,.card,.list-group-item,.tooltiptext\"\n      );\n      elements.forEach((element) => {\n        element.style.backgroundColor = \"#000\";\n        element.style.color = \"#fff\";\n      });\n    } else {\n      var elements = document.querySelectorAll(\n        \"body,.card,.list-group-item,.tooltiptext\"\n      );\n      elements.forEach((element) => {\n        element.style.backgroundColor = \"#fff\";\n        element.style.color = \"#000\";\n      });\n    }\n  }, []);\n\n  const { drives, setDrives } = useContext(DrivesContext);\n\n  const { files, setFiles } = useContext(FilesContext);\n\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  const [showUpload, setShow] = useState(false);\n  console.log(\" user home page\");\n  // const { params: { userName } = {} } = match;\n  useEffect(() => {\n    axios\n      .get(\"/user/data/read\", { withCredentials: true })\n      .then(async (response) => {\n        sessionStorage.setItem(\"lastFetchDt\", JSON.stringify(new Date()));\n        if (response.data.success) {\n          console.log(\"response: \", response.data);\n          if (response.data.drives.length > 0) {\n            setDrives(response.data.drives);\n            // console.log(\"files received:\",response.data.drives.map(({ files }) => files).flat());\n            setFiles(\n              response.data.drives\n                .map(({ files }) => files)\n                .flat()\n                .sort(function (a, b) {\n                  return new Date(b.createdAt) - new Date(a.createdAt);\n                })\n                .map((file) => {\n                  if (file.fileFolderType.includes(\"undefined\")) {\n                    let mimeSuffArr = file.mimeType.split(\"/\");\n                    let mimeSuff = mimeSuffArr[\n                      mimeSuffArr.length - 1\n                    ].toLowerCase();\n\n                    if (typeof mimeSuffixMappings[mimeSuff] !== \"undefined\") {\n                      file.fileFolderType = mimeSuffixMappings[mimeSuff];\n                    } else {\n                      file.fileFolderType = \"Others\";\n                    }\n                  }\n                  return file;\n                })\n            );\n          } else {\n            setDrives([]);\n          }\n        } else {\n          history.push(\"/\");\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  const triggerUpload = () => {\n    setShow(true);\n  };\n  const handleUploadModalClose = () => {\n    setShow(false);\n  };\n  return (\n    <div>\n      <Header />\n\n      {loggedIn.status && (\n        <div className=\"container-fluid\">\n          <div className=\"row\" style={{ paddingTop: \"2%\" }}>\n            <div className=\"col-sm-2\" style={{ padding: \"0\" }}>\n              <DriveList />\n            </div>\n            <div className=\"col-sm-8\">\n              <FileList />\n              <br />\n              {driveAdded.status ? (\n                <p\n                  style={{\n                    backgroundColor: \"green\",\n                    color: \"#fff\",\n                    fontSize: \"medium\",\n                    margin: \"2%\",\n                    padding: \"2%\",\n                  }}\n                >\n                  {\" \"}\n                  {driveAdded.type} drive ({driveAdded.email}) added\n                  successfully\n                </p>\n              ) : driveAdded.message.length > 0 ? (\n                <p\n                  style={{\n                    backgroundColor: \"red\",\n                    color: \"#fff\",\n                    fontSize: \"medium\",\n                    margin: \"2%\",\n                    padding: \"2%\",\n                  }}\n                >\n                  {\" \"}\n                  {driveAdded.message}\n                </p>\n              ) : null}\n              <br />\n              {driveDeleted.status ? (\n                <p\n                  style={{\n                    backgroundColor: \"green\",\n                    color: \"#fff\",\n                    fontSize: \"medium\",\n                    margin: \"2%\",\n                    padding: \"2%\",\n                  }}\n                >\n                  {\" \"}\n                  Drive removed successfully\n                </p>\n              ) : driveDeleted.message.length > 0 ? (\n                <p\n                  style={{\n                    backgroundColor: \"red\",\n                    color: \"#fff\",\n                    fontSize: \"medium\",\n                    margin: \"2%\",\n                    padding: \"2%\",\n                  }}\n                >\n                  {\" \"}\n                  {driveDeleted.message}\n                </p>\n              ) : null}\n            </div>\n            <div className=\"col-sm-2\">\n              <AddDrives />\n              <div className=\"cardHeader\" style={{ marginTop: \"2%\" }}>\n                <button className=\"uploadButton\" onClick={triggerUpload}>\n                  {\" \"}\n                  Upload File\n                </button>\n              </div>\n              <FileUpload\n                show={showUpload}\n                handleClose={handleUploadModalClose}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n      <Footer />\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}