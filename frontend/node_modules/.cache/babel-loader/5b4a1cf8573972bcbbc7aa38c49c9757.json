{"ast":null,"code":"var _jsxFileName = \"/Users/naringles/Desktop/OneStorage/frontend/src/components/RegisterTab.jsx\";\nimport React, { useState, useContext } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LoginContext } from \"./LoginContext\";\n\nfunction Register() {\n  const {\n    register,\n    watch,\n    errors,\n    handleSubmit\n  } = useForm();\n  let history = useHistory();\n  const [nameTaken, setNameTaken] = useState(false);\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  console.log(\"register\");\n\n  const onSubmit = (data, e) => {\n    axios.post(\"/user/auth/register\", data).then(response => {\n      if (response.data.status) {\n        console.log(\"successful signup\");\n        setLoggedIn({\n          username: response.data.username,\n          status: response.data.status\n        });\n        history.push(`/user/home/${response.data.username}`);\n      } else {\n        setNameTaken(true);\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n    console.log(data);\n    e.preventDefault();\n    e.target.reset();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"User Name\",\n    name: \"username\",\n    ref: register,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    className: \"form-control\",\n    placeholder: \"Email\",\n    name: \"email\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    className: \"form-control\",\n    name: \"password\",\n    ref: register({\n      pattern: /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/\n    }),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"\\uC801\\uC5B4\\uB3C4 8\\uC790 \\uC774\\uC0C1, \\uC801\\uC5B4\\uB3C4 \\uD558\\uB098\\uC529\\uC758 \\uBB38\\uC790,\\uC22B\\uC790,\\uD2B9\\uC218\\uBB38\\uC790\\uAC00 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control\",\n    name: \"cnfPassword\",\n    ref: register({\n      validate: value => value === watch(\"password\")\n    }),\n    placeholder: \"Confirm Password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }), errors.cnfPassword && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 34\n    }\n  }, \"\\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn signUp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, \"\\uD68C\\uC6D0\\uAC00\\uC785\"), nameTaken && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 23\n    }\n  }, \" \\uC774\\uBA54\\uC77C\\uC774 \\uC774\\uBBF8 \\uC874\\uC7AC\\uD569\\uB2C8\\uB2E4.\")));\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/naringles/Desktop/OneStorage/frontend/src/components/RegisterTab.jsx"],"names":["React","useState","useContext","useForm","useHistory","axios","LoginContext","Register","register","watch","errors","handleSubmit","history","nameTaken","setNameTaken","loggedIn","setLoggedIn","console","log","onSubmit","data","e","post","then","response","status","username","push","catch","err","error","preventDefault","target","reset","pattern","password","validate","value","cnfPassword"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,QAA4C,OAA5C;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,gBAA7B;;AACA,SAASC,QAAT,GAAoB;AAClB,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,MAAnB;AAA2BC,IAAAA;AAA3B,MAA4CR,OAAO,EAAzD;AACA,MAAIS,OAAO,GAAGR,UAAU,EAAxB;AACA,QAAM,CAACS,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bd,UAAU,CAACI,YAAD,CAA1C;AACAW,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;;AAEA,QAAMC,QAAQ,GAAG,CAACC,IAAD,EAAOC,CAAP,KAAa;AAC5BhB,IAAAA,KAAK,CACFiB,IADH,CACQ,qBADR,EAC+BF,IAD/B,EAEGG,IAFH,CAESC,QAAD,IAAc;AAClB,UAAIA,QAAQ,CAACJ,IAAT,CAAcK,MAAlB,EAA0B;AACxBR,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAF,QAAAA,WAAW,CAAC;AACVU,UAAAA,QAAQ,EAAEF,QAAQ,CAACJ,IAAT,CAAcM,QADd;AAEVD,UAAAA,MAAM,EAAED,QAAQ,CAACJ,IAAT,CAAcK;AAFZ,SAAD,CAAX;AAIAb,QAAAA,OAAO,CAACe,IAAR,CAAc,cAAaH,QAAQ,CAACJ,IAAT,CAAcM,QAAS,EAAlD;AACD,OAPD,MAOO;AACLZ,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,KAbH,EAcGc,KAdH,CAcUC,GAAD,IAAS;AACdZ,MAAAA,OAAO,CAACa,KAAR,CAAcD,GAAd;AACD,KAhBH;AAkBAZ,IAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACAC,IAAAA,CAAC,CAACU,cAAF;AACAV,IAAAA,CAAC,CAACW,MAAF,CAASC,KAAT;AACD,GAtBD;;AAwBA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,QAAQ,EAAEtB,YAAY,CAACQ,QAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,WAAW,EAAC,WAHd;AAIE,IAAA,IAAI,EAAC,UAJP;AAKE,IAAA,GAAG,EAAEX,QALP;AAME,IAAA,QAAQ,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAYE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,WAAW,EAAC,OAHd;AAIE,IAAA,IAAI,EAAC,OAJP;AAKE,IAAA,GAAG,EAAEA,QALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAZF,eAqBE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,WAAW,EAAC,UAFd;AAGE,IAAA,SAAS,EAAC,cAHZ;AAIE,IAAA,IAAI,EAAC,UAJP;AAKE,IAAA,GAAG,EAAEA,QAAQ,CAAC;AACZ0B,MAAAA,OAAO,EAAE;AADG,KAAD,CALf;AAQE,IAAA,QAAQ,MARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAWGxB,MAAM,CAACyB,QAAP,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qLAZJ,CArBF,eAsCE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,IAAI,EAAC,aAHP;AAIE,IAAA,GAAG,EAAE3B,QAAQ,CAAC;AAAE4B,MAAAA,QAAQ,EAAGC,KAAD,IAAWA,KAAK,KAAK5B,KAAK,CAAC,UAAD;AAAtC,KAAD,CAJf;AAKE,IAAA,WAAW,EAAC,kBALd;AAME,IAAA,QAAQ,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EASGC,MAAM,CAAC4B,WAAP,iBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yFATzB,CAtCF,eAkDE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAlDF,EAqDGzB,SAAS,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8EArDhB,CADF,CADF;AA2DD;;AAED,eAAeN,QAAf","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LoginContext } from \"./LoginContext\";\nfunction Register() {\n  const { register, watch, errors, handleSubmit } = useForm();\n  let history = useHistory();\n  const [nameTaken, setNameTaken] = useState(false);\n  const [loggedIn, setLoggedIn] = useContext(LoginContext);\n  console.log(\"register\");\n\n  const onSubmit = (data, e) => {\n    axios\n      .post(\"/user/auth/register\", data)\n      .then((response) => {\n        if (response.data.status) {\n          console.log(\"successful signup\");\n          setLoggedIn({\n            username: response.data.username,\n            status: response.data.status,\n          });\n          history.push(`/user/home/${response.data.username}`);\n        } else {\n          setNameTaken(true);\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n\n    console.log(data);\n    e.preventDefault();\n    e.target.reset();\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"form-group\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"User Name\"\n            name=\"username\"\n            ref={register}\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <input\n            type=\"email\"\n            className=\"form-control\"\n            placeholder=\"Email\"\n            name=\"email\"\n            ref={register}\n          />\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            className=\"form-control\"\n            name=\"password\"\n            ref={register({\n              pattern: /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,\n            })}\n            required\n          />\n          {errors.password && (\n            <p>\n              적어도 8자 이상, 적어도 하나씩의 문자,숫자,특수문자가 필요합니다.\n            </p>\n          )}\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            className=\"form-control\"\n            name=\"cnfPassword\"\n            ref={register({ validate: (value) => value === watch(\"password\") })}\n            placeholder=\"Confirm Password\"\n            required\n          />\n          {errors.cnfPassword && <p>비밀번호가 일치하지 않습니다.</p>}\n        </div>\n\n        <button type=\"submit\" className=\"btn signUp\">\n          회원가입\n        </button>\n        {nameTaken && <p> 이메일이 이미 존재합니다.</p>}\n      </form>\n    </div>\n  );\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}