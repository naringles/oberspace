"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),e=require("@reach/portal"),n=require("@reach/rect"),r=require("@reach/utils"),i=require("tabbable");function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=u(t),f=u(e),a=u(i);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var l=t.forwardRef((function(t,e){return o.default.createElement(f.default,null,o.default.createElement(d,Object.assign({ref:e},t)))})),d=t.forwardRef((function(e,i){var u=e.targetRef,f=e.position,l=void 0===f?h:f,d=e.unstable_observableRefs,p=void 0===d?[]:d,v=function(t,e){if(null==t)return{};var n,r,i={},u=Object.keys(t);for(r=0;r<u.length;r++)e.indexOf(n=u[r])>=0||(i[n]=t[n]);return i}(e,["targetRef","position","unstable_observableRefs"]),g=t.useRef(null),w=n.useRect(g,!v.hidden),b=n.useRect(u,!v.hidden),y=r.useForkedRef(g,i);return function(e,n){var i=r.getOwnerDocument(e.current);function u(t){"Tab"===t.key&&n.current&&0===a.default(n.current).length||("Tab"===t.key&&t.shiftKey?function(t){if(t.shiftKey){var e=o();return t.target===e}}(t)?function(t){var e=n.current&&a.default(n.current),r=e&&e[e.length-1];r&&(t.preventDefault(),r.focus())}(t):function(t){var e=n.current&&a.default(n.current);return!!e&&0!==e.length&&t.target===e[0]}(t)?function(t){var n;t.preventDefault(),null===(n=e.current)||void 0===n||n.focus()}(t):function(t){return!!i&&t.target===a.default(i)[0]}(t)&&c():"Tab"===t.key&&(e.current&&i&&e.current===i.activeElement?function(t){var e=n.current&&a.default(n.current);e&&e[0]&&(t.preventDefault(),e[0].focus())}(t):function(){if(n.current&&i&&n.current.contains(i.activeElement||null)){var t=n.current&&a.default(n.current);return Boolean(t&&i&&t[t.length-1]===i.activeElement)}return!1}()?function(t){var e=o();e&&(t.preventDefault(),e.focus())}(t):function(t){var e=i&&n.current?a.default(i).filter((function(t){return!n.current.contains(t)})):null;return!!e&&t.target===e[e.length-1]}(t)&&c()))}function o(){var t=i&&a.default(i),r=t&&e.current?t.indexOf(e.current):-1,u=t&&t[r+1];return(!n.current||!n.current.contains(u||null))&&u}t.useEffect((function(){if(i)return i.addEventListener("keydown",u),function(){i.removeEventListener("keydown",u)}}),[]);var f=[];function c(){var t=n.current&&a.default(n.current);t&&(t.forEach((function(t){f.push([t,t.tabIndex]),t.tabIndex=-1})),i&&i.addEventListener("focusin",l))}function l(){i&&i.removeEventListener("focusin",l),f.forEach((function(t){t[0].tabIndex=t[1]}))}}(u,g),o.default.createElement("div",Object.assign({"data-reach-popover":"",ref:y},v,{style:c({position:"absolute"},s.apply(void 0,[l,b,w].concat(p)),v.style)}))}));function s(t,e,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),u=3;u<r;u++)i[u-3]=arguments[u];return n?t.apply(void 0,[e,n].concat(i.map((function(t){return t.current})))):{visibility:"hidden"}}function p(t,e){return{top:v(t,e).directionUp?t.top-e.height+window.pageYOffset+"px":t.top+t.height+window.pageYOffset+"px"}}var h=function(t,e){return t&&e?c({left:v(t,e).directionRight?t.right-e.width+window.pageXOffset+"px":t.left+window.pageXOffset+"px"},p(t,e)):{}};function v(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i={top:t.top-e.height<0,right:window.innerWidth<t.left+e.width-n,bottom:window.innerHeight<t.bottom+e.height-r,left:t.left+t.width-e.width<0};return{directionRight:i.right&&!i.left,directionLeft:i.left&&!i.right,directionUp:i.bottom&&!i.top,directionDown:i.top&&!i.bottom}}exports.default=l,exports.getCollisions=v,exports.positionDefault=h,exports.positionMatchWidth=function(t,e){return t&&e?c({width:t.width,left:t.left},p(t,e)):{}},exports.positionRight=function(t,e){return t&&e?c({left:v(t,e).directionLeft?t.left+window.pageXOffset+"px":t.right-e.width+window.pageXOffset+"px"},p(t,e)):{}};
//# sourceMappingURL=popover.cjs.production.min.js.map
